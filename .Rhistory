# visualizacion inicial
ggplot() + geom_sf(data=puntos)
# cargamos puntos de datos
puntos <- read_rds("data/puntos.rds") %>%
filter(id == unique(puntos$id)[20]) %>%
select(lng,lat) %>%
SpatialPoints(proj4string = CRS(prj_dd)) %>%
st_as_sf()
# cargamos puntos de datos
puntos <- read_rds("data/puntos.rds") %>%
filter(id == unique(puntos$id)[20]) %>%
select(lng,lat) %>%
SpatialPoints(proj4string = CRS(prj_dd)) %>%
st_as_sfc()
# cargamos puntos de datos
puntos <- read_rds("data/puntos.rds") %>%
filter(id == unique(.$id)[20]) %>%
select(lng,lat) %>%
SpatialPoints(proj4string = CRS(prj_dd)) %>%
st_as_sfc()
# cargamos puntos de datos
puntos <- read_rds("data/puntos.rds") %>%
filter(id == unique(.$id)[20]) %>%
select(lng,lat) %>%
SpatialPoints(proj4string = CRS(prj_dd)) %>%
st_as_sf()
# invocamos librerias
pacman::p_load(tidyverse, ggmap, sp, sf, elevatr, raster, rayshader,
tmap, mapview, RColorBrewer, viridis, mapdeck)
# definimos proyeccion segun el formato proj4
prj_dd = "+proj=longlat +ellps=WGS84 +datum=WGS84  +no_defs"
# cargamos puntos de datos
puntos <- read_rds("data/puntos.rds") %>%
filter(id == unique(.$id)[20]) %>%
select(lng,lat) %>%
SpatialPoints(proj4string = CRS(prj_dd)) %>%
st_as_sf()
# cargamos archivo shp con poligonos de LasCondes
las_condes <- read_sf("data/MZ_REGION_13.shp") %>%
filter(COMUNA == "13114")
# visualizacion inicial
ggplot() + geom_sf(data=puntos)
# visualizacion inicial
ggplot() +
geom_sf(data = las_condes) +
geom_sf(data=puntos)
# visualizacion inicial
ggplot() +
geom_sf(data = las_condes, aes(col = PERSONAS)) +
geom_sf(data = puntos)
# visualizacion inicial
ggplot() +
geom_sf(data = las_condes, aes(fill = PERSONAS)) +
geom_sf(data = puntos)
# visualizacion inicial
ggplot() +
geom_sf(data = las_condes, aes(fill = PERSONAS), col = NA) +
geom_sf(data = puntos)
#visualizamos con funcion nativa
plot(spatial_data)
#visualizamos con funcion nativa
plot(puntos)
spatial_data
# bbox del objeto espacial
bbox(puntos)
# obtenemos elevaciones de toda el area
elev <- get_elev_raster(las_condes, prj = prj_dd, z = 12)
st_coordinates(las_condes)
# obtenemos elevaciones de toda el area
elev <- get_elev_raster(st_coordinates(las_condes), prj = prj_dd, z = 12)
st_coordinates(las_condes)
CRS(las_condes)
# bbox del objeto espacial
bbox(puntos)
# bbox del objeto espacial
bbox(puntos$geometry)
? get_elev_raster
# obtenemos elevaciones de toda el area
elev <- get_elev_raster(puntos, prj = prj_dd, z = 12)
# visualizamos las elevaciones
plot(elev)
# traducimos elevaciones a curvas de nivel, con 100 niveles
curvas_nivel <- rasterToContour(elev, nlevels = 100) %>% st_as_sf()
# visualizamos curvas de nivel
plot(curvas_nivel)
# las visualizamos con ggplot
ggplot() +
geom_sf(data=st_as_sf(curvas_nivel))
# las visualizamos con ggplot
ggplot() +
geom_sf(data= curvas_nivel) +
geom_sf(data = las_condes, aes(fill = PERSONAS), alpha = .5, col = NA) +
geom_sf(data = puntos)
# buscamos un mapa base apropiado
maptype <- 'terrain'
map <- ggmap::get_stamenmap(bbox(spatial_data), maptype = maptype, zoom=12, source="stamen")
map <- ggmap::get_stamenmap(bbox(puntos), maptype = maptype, zoom=12, source="stamen")
bbox(puntos)
st_bbox(puntos)
map <- ggmap::get_stamenmap(st_bbox(puntos), maptype = maptype, zoom=12, source="stamen")
st_bbox(puntos)
? ggmap::get_stamenmap
# buscamos un mapa base apropiado
maptype <- 'terrain'
map <- ggmap::get_stamenmap(st_bbox(puntos), maptype = maptype, zoom=12, source="stamen")
st_bbox(puntos) %>% class()
st_bbox(puntos) %>% as.numeric()
map <- ggmap::get_stamenmap(st_bbox(puntos) %>% as.numeric(), maptype = maptype, zoom=12, source="stamen")
# visualizamos utilizando ggmap
ggmap(map)
bboxexp <- st_bbox(puntos) %>% as.numeric()
# visualizamos agregando la ruta
ggmap(map) +
geom_path(data=data, col="yellow", aes(lng,lat), size = 2)
# visualizamos agregando la ruta
ggmap(map) +
geom_path(data=puntos, col="yellow", aes(lng,lat), size = 2)
# visualizamos agregando la ruta
ggmap(map) +
geom_path(data=puntos, col="yellow", aes(lon,lat), size = 2)
# visualizamos agregando la ruta
ggmap(map) +
geom_sf(data=puntos, col="yellow",size = 2)
# exploramos la densidad poblacional
las_condes %>% plot()
map <- ggmap::get_stamenmap(puntos, maptype = maptype, zoom=12, source="stamen")
# visualizamos agregando la ruta
ggmap(map) +
geom_point(data=puntos, aes(lng, lat), col="yellow",size = 2)
# visualizamos agregando la ruta
ggmap(map) +
geom_point(data=puntos, aes(lon, lat), col="yellow",size = 2)
View(puntos)
# visualizamos agregando la ruta
ggmap(map) +
coord_sf(crs = st_crs(3857))  # force the ggplot2 map to be in 3857
# visualizamos agregando la ruta
ggmap(map) +
coord_sf(crs = st_crs(3857)) + # force the ggplot2 map to be in 3857
geom_sf(data=puntos)
ggmap_bbox <- function(map) {
if (!inherits(map, "ggmap")) stop("map must be a ggmap object")
# Extract the bounding box (in lat/lon) from the ggmap to a numeric vector,
# and set the names to what sf::st_bbox expects:
map_bbox <- setNames(unlist(attr(map, "bb")),
c("ymin", "xmin", "ymax", "xmax"))
# Coonvert the bbox to an sf polygon, transform it to 3857,
# and convert back to a bbox (convoluted, but it works)
bbox_3857 <- st_bbox(st_transform(st_as_sfc(st_bbox(map_bbox, crs = 4326)), 3857))
# Overwrite the bbox of the ggmap object with the transformed coordinates
attr(map, "bb")$ll.lat <- bbox_3857["ymin"]
attr(map, "bb")$ll.lon <- bbox_3857["xmin"]
attr(map, "bb")$ur.lat <- bbox_3857["ymax"]
attr(map, "bb")$ur.lon <- bbox_3857["xmax"]
map
}
# Use the function:
map <- ggmap_bbox(map)
# visualizamos utilizando ggmap
ggmap(map)
# visualizamos agregando la ruta
ggmap(map) +
coord_sf(crs = st_crs(3857)) + # force the ggplot2 map to be in 3857
geom_sf(data=puntos)
map
st_bbox(map)
bbox(map)
# bbox del objeto espacial
st_bbox(puntos)
# visualizamos agregando la ruta
ggmap(map) +
geom_point(data=puntos$geometry, aes(lon, lat), col="yellow",size = 2)
st_coordinates(puntos$geometry)
# visualizamos agregando la ruta
ggmap(map) +
geom_point(data=st_coordinates(puntos$geometry), aes(X, Y), col="yellow",size = 2)
# visualizamos agregando la ruta
ggmap(map) +
geom_point(data=data.frame(st_coordinates(puntos$geometry)), aes(X, Y), col="yellow",size = 2)
map <- ggmap::get_stamenmap(st_bbox(puntos) %>% as.numeric(), maptype = maptype, zoom=12, source="stamen")
# visualizamos utilizando ggmap
ggmap(map)
# visualizamos agregando la ruta
ggmap(map) +
geom_point(data=data.frame(st_coordinates(puntos$geometry)), aes(X, Y), col="yellow",size = 2)
bboxexp <- st_bbox(puntos) %>% as.numeric()
bboxexp[1] <- bboxexp[1]-0.05
bboxexp[2] <- bboxexp[2]-0.02
bboxexp[3] <- bboxexp[3]+0.05
bboxexp[4] <- bboxexp[4]+0.02
# bbox del objeto espacial
bbox <- st_bbox(puntos)
# bbox del objeto espacial
bbox <- st_bbox(puntos) %>% as.numeric()
# visualizamos las elevaciones
plot(elev)
# traducimos elevaciones a curvas de nivel, con 100 niveles
curvas_nivel <- rasterToContour(elev, nlevels = 100) %>% st_as_sf()
# visualizamos curvas de nivel
plot(curvas_nivel)
# las visualizamos con ggplot
ggplot() +
geom_sf(data= curvas_nivel) +
geom_sf(data = las_condes, aes(fill = PERSONAS), alpha = .5, col = NA) +
geom_sf(data = puntos)
# obtencion de mapas base -----
maptype <- 'terrain'
map <- ggmap::get_stamenmap(bbox, maptype = maptype, zoom=12, source="stamen")
# las visualizamos con ggplot
ggplot() +
geom_sf(data= curvas_nivel) +
geom_sf(data = las_condes, aes(fill = PERSONAS), alpha = .5, col = NA) +
geom_sf(data = puntos, col = "yellow")
# visualizamos utilizando ggmap
ggmap(map)
# visualizamos agregando la ruta
ggmap(map) +
geom_point(data=data.frame(st_coordinates(puntos$geometry)), aes(X, Y), col="yellow",size = 2)
bboxexp <- bbox
bboxexp[1] <- bboxexp[1]-0.05
bboxexp[2] <- bboxexp[2]-0.02
bboxexp[3] <- bboxexp[3]+0.05
bboxexp[4] <- bboxexp[4]+0.02
map <- ggmap::get_stamenmap(bboxexp, maptype = maptype, zoom=12, source="stamen")
# visualizamos utilizando ggmap
ggmap(map)
# visualizamos agregando la ruta
ggmap(map) +
geom_point(data=data.frame(st_coordinates(puntos$geometry)), aes(X, Y), col="yellow",size = 2)
# paso las elevaciones a matriz
stream_mat <- raster_to_matrix(elev)
# achico la matriz (para que corra mas rapido)
stream_mat_small <- resize_matrix(stream_mat, 0.5)
# creo capas de visualizacion y sombreado con rayshader
stream_mat_small %>%
height_shade() %>%
add_overlay(sphere_shade(stream_mat_small, texture = "desert",
zscale=4, colorintensity = 5), alphalayer = 0.8) %>%
add_overlay(generate_point_overlay(st_as_sf(curvas_nivel),
color = viridisLite::magma(100, direction = -1), size = 1, pc = 19,
raster::extent(elev), heightmap = stream_mat_small), alphalayer = 0.9) %>%
add_overlay(generate_point_overlay(st_as_sf(spatial_data), color = "yellow", size = 1, pc = 19,
raster::extent(elev), heightmap = stream_mat_small)) %>%
plot_map()
# creo capas de visualizacion y sombreado con rayshader
stream_mat_small %>%
height_shade() %>%
add_overlay(sphere_shade(stream_mat_small, texture = "desert",
zscale=4, colorintensity = 5), alphalayer = 0.8) %>%
add_overlay(generate_point_overlay(st_as_sf(curvas_nivel),
color = viridisLite::magma(100, direction = -1), size = 1, pc = 19,
raster::extent(elev), heightmap = stream_mat_small), alphalayer = 0.9) %>%
add_overlay(generate_point_overlay(st_as_sf(points), color = "yellow", size = 1, pc = 19,
raster::extent(elev), heightmap = stream_mat_small)) %>%
plot_map()
# creo capas de visualizacion y sombreado con rayshader
stream_mat_small %>%
height_shade() %>%
add_overlay(sphere_shade(stream_mat_small, texture = "desert",
zscale=4, colorintensity = 5), alphalayer = 0.8) %>%
add_overlay(generate_point_overlay(st_as_sf(curvas_nivel),
color = viridisLite::magma(100, direction = -1), size = 1, pc = 19,
raster::extent(elev), heightmap = stream_mat_small), alphalayer = 0.9) %>%
add_overlay(generate_point_overlay((points), color = "yellow", size = 1, pc = 19,
raster::extent(elev), heightmap = stream_mat_small)) %>%
plot_map()
# creo capas de visualizacion y sombreado con rayshader
stream_mat_small %>%
height_shade() %>%
add_overlay(sphere_shade(stream_mat_small, texture = "desert",
zscale=4, colorintensity = 5), alphalayer = 0.8) %>%
add_overlay(generate_point_overlay(st_as_sf(curvas_nivel),
color = viridisLite::magma(100, direction = -1), size = 1, pc = 19,
raster::extent(elev), heightmap = stream_mat_small), alphalayer = 0.9) %>%
add_overlay(generate_point_overlay(points, color = "yellow", size = 1, pc = 19,
raster::extent(elev), heightmap = stream_mat_small)) %>%
plot_map()
# creo capas de visualizacion y sombreado con rayshader
stream_mat_small %>%
height_shade() %>%
add_overlay(sphere_shade(stream_mat_small, texture = "desert",
zscale=4, colorintensity = 5), alphalayer = 0.8) %>%
add_overlay(generate_point_overlay(st_as_sf(curvas_nivel),
color = viridisLite::magma(100, direction = -1), size = 1, pc = 19,
raster::extent(elev), heightmap = stream_mat_small), alphalayer = 0.9) %>%
add_overlay(generate_point_overlay(puntos, color = "yellow", size = 1, pc = 19,
raster::extent(elev), heightmap = stream_mat_small)) %>%
plot_map()
# creamos una paleta que nos va a servir para los colores
pal <- magma(n = length(unique(las_condes$PERSONAS)), direction = -1)
# visualizamos utilizando ggmap
ggmap(map)
# visualizamos agregando la ruta
ggmap(map) +
geom_point(data=data.frame(st_coordinates(puntos$geometry)), aes(X, Y), col="yellow",size = 2)
# creo capas de visualizacion y sombreado con rayshader
elev_mat_small %>%
height_shade() %>%
add_overlay(sphere_shade(elev_mat_small, texture = "desert",
zscale=4, colorintensity = 5), alphalayer = 0.8) %>%
add_overlay(generate_point_overlay(st_as_sf(curvas_nivel),
color = viridisLite::magma(100, direction = -1), size = 1, pc = 19,
raster::extent(elev), heightmap = elev_mat_small), alphalayer = 0.9) %>%
add_overlay(generate_point_overlay(puntos, color = "yellow", size = 1, pc = 19,
raster::extent(elev), heightmap = elev_mat_small)) %>%
plot_map()
# paso las elevaciones a matriz
elev_mat <- raster_to_matrix(elev)
# achico la matriz (para que corra mas rapido)
elev_mat_small <- resize_matrix(elev_mat, 0.5)
# creo capas de visualizacion y sombreado con rayshader
elev_mat_small %>%
height_shade() %>%
add_overlay(sphere_shade(elev_mat_small, texture = "desert",
zscale=4, colorintensity = 5), alphalayer = 0.8) %>%
add_overlay(generate_point_overlay(st_as_sf(curvas_nivel),
color = viridisLite::magma(100, direction = -1), size = 1, pc = 19,
raster::extent(elev), heightmap = elev_mat_small), alphalayer = 0.9) %>%
add_overlay(generate_point_overlay(puntos, color = "yellow", size = 1, pc = 19,
raster::extent(elev), heightmap = elev_mat_small)) %>%
plot_map()
# graficamos usando funcion mapview
mapview(las_condes)
# especificamos variable para colorear
mapview(las_condes, zcol = "PERSONAS")
# especificamos paleta
mapview(las_condes, zcol = "PERSONAS", col.regions = pal)
? mapview
# coloreamos de acuerdo al nombre del distrito y generamos un popup
mapview(
las_condes,
zcol = "ZONA",
col.regions = pal,
popup = popupTable(
las_condes,
zcol = c(
"PERSONAS",
"AREA",
"E65YMAS"
)
)
)
pacman::p_load(raster, mapview, sf)
# Cargamos imagen satelital de las condes ----
LC <- brick("data/OLI_LC.tif")
LC
# asigno nombres a las bandas
names(LC) <- c("aerosol","blue", "green", "red", "nir", "swir1", "swir2", "tir1" )
### utm utilizado a nivel regional (depende de la zona y hemisferio)
crs_utm <- "+proj=utm +zone=19 +south +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"
# Reproyección de Imagen
LC_ll <- projectRaster(LC, crs = crs_utm)
# Color Natural
plotRGB(LC_ll, r = 4, g = 3, b = 2)
# Color Natural con contraste lineal
plotRGB(LC_ll, r = 4, g = 3, b = 2, stretch = "lin")
# Color Natural con contraste de quiebres naturales
plotRGB(LC_ll, r = 4, g = 3, b = 2, stretch = "hist")
# definimos fronteras (extent)
ext <- extent(c(350638, 358235,  6299157, 6304228))
# recortamos
LC_crop <- crop(x = LC, y = ext, snap="out")
# visualizamos
plotRGB(LC_crop, r = 4, g = 3, b = 2, stretch = "lin")
# Infrarojo (5,4,3)
plotRGB(LC, r = 5, g = 4, b = 3, stretch = "lin")
# Agricultura (6,5,2)
plotRGB(LC, r = 6, g = 5, b = 2, stretch = "lin")
# Penetración de la Radiación en la Atmósfera (7,6,5)
plotRGB(LC, r = 7, g = 6, b = 5, stretch = "lin")
# Uso del Suelo / Masas de Agua (5,6,4)
plotRGB(LC, r = 5, g = 6, b = 4, stretch = "lin")
# Infrarojo de Onda Corta (7,5,4)
plotRGB(LC, r = 7, g = 5, b = 4, stretch = "lin")
# Análisis de Vegetación (6,5,4)
plotRGB(LC, r = 6, g = 5, b = 4, stretch = "lin")
# Análisis de Vegetación Sana (5,6,2)
plotRGB(LC, r = 5, g = 6, b = 2, stretch = "lin")
# normalizamos los valores del canal 5 (x-mean)/sd
infrared <- scale(LC[[5]])
# dibujamos el infrarojo
plot(infrared)
# extraemos zonas con infrarojo alto, que aproximan a la vegetacion
vegetacion <- calc(infrared, fun = function(x) ifelse(x <= 3, NA, x))
pal_green <- colorRampPalette(c("green","springgreen4", "darkgreen"))
plot(vegetacion , col = pal_green( 200 ))
# pasamos pixeles a poligonos
poligonos_infrarojo <- rasterToPolygons(vegetacion, digits = 16) %>% st_as_sf()
plot(poligonos_infrarojo, pal = pal_green)
# veamos que pasa al unirlos
merged_poligonos_infrarojo <- poligonos_infrarojo  %>%
st_union() %>% # unimos vecinos
st_cast("POLYGON")  # aislamos los poligonos resultantes
plot(merged_poligonos_infrarojo, pal = pal_green)
plot(merged_poligonos_infrarojo)
# extraemos los valores del raster original sobre cada poligono resultante y lo guardamos en un df
vegetacion_poly <- data.frame(vegetacion = raster::extract(vegetacion,
st_as_sf(merged_poligonos_infrarojo),
fun=mean))
# le asignamos al df las geometrias de los poligonos
st_geometry(vegetacion_poly) <- st_sfc(merged_poligonos_infrarojo)
# visualizamos
plot(vegetacion_poly, pal = pal_green)
# agregar la frontera de Las Condes
LasCondes <- sf::st_read("data/LasCondes.shp")
plot(LasCondes$geometry)
# agregar la frontera de Las Condes
LasCondes <- sf::st_read("data/LasCondes.shp")
# agregar la frontera de Las Condes
LasCondes <- sf::st_read("data/LasCondes.shp")
plot(LasCondes$geometry)
plot(vegetacion_poly, pal = pal_green, add = TRUE)
# visualizamos en mapa interactivo
mview <- mapview(LasCondes, color = "#05A39B", alpha.region =0)+
viewRGB(LC, r = 4, g = 3, b = 2, na.color = "transparent") +
mapview(vegetacion_poly, na.color = "transparent", col.regions = pal_green)
mview
# guardamos el mapa como pagina html
mapshot(x = mview, url = "mapa_veg.html")
pacman::p_load(raster, mapview, sf)
# Cargamos imagen satelital de las condes ----
LC <- brick("data/OLI_LC.tif")
LC
library(pacman)
p_load(raster, mapview, sf)
pacman::p_load(raster, mapview, sf)
# Cargamos imagen satelital de las condes ----
LC <- brick("data/OLI_LC.tif")
LC
# asigno nombres a las bandas
names(LC) <- c("aerosol","blue", "green", "red", "nir", "swir1", "swir2", "tir1" )
LC
### utm utilizado a nivel regional (depende de la zona y hemisferio)
crs_utm <- "+proj=utm +zone=19 +south +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"
# Reproyección de Imagen
LC_ll <- projectRaster(LC, crs = crs_utm)
# Color Natural
plotRGB(LC_ll, r = 4, g = 3, b = 2)
# Color Natural con contraste lineal
plotRGB(LC_ll, r = 4, g = 3, b = 2, stretch = "lin")
# Color Natural con contraste de quiebres naturales
plotRGB(LC_ll, r = 4, g = 3, b = 2, stretch = "hist")
# Color Natural con contraste lineal
plotRGB(LC_ll, r = 4, g = 3, b = 2, stretch = "lin")
# definimos fronteras (extent)
ext <- extent(c(350638, 358235,  6299157, 6304228))
# recortamos
LC_crop <- crop(x = LC, y = ext, snap="out")
# visualizamos
plotRGB(LC_crop, r = 4, g = 3, b = 2, stretch = "lin")
# Cargamos imagen satelital de las condes ----
LC <- brick("data/OLI_LC.tif")
LC
# Color Natural con contraste lineal
plotRGB(LC_ll, r = 4, g = 3, b = 2, stretch = "lin")
# Infrarojo (5,4,3)
plotRGB(LC, r = 5, g = 4, b = 3, stretch = "lin")
# Agricultura (6,5,2)
plotRGB(LC, r = 6, g = 5, b = 2, stretch = "lin")
# Penetración de la Radiación en la Atmósfera (7,6,5)
plotRGB(LC, r = 7, g = 6, b = 5, stretch = "lin")
# Uso del Suelo / Masas de Agua (5,6,4)
plotRGB(LC, r = 5, g = 6, b = 4, stretch = "lin")
# Infrarojo de Onda Corta (7,5,4)
plotRGB(LC, r = 7, g = 5, b = 4, stretch = "lin")
# Análisis de Vegetación (6,5,4)
plotRGB(LC, r = 6, g = 5, b = 4, stretch = "lin")
# Análisis de Vegetación Sana (5,6,2)
plotRGB(LC, r = 5, g = 6, b = 2, stretch = "lin")
# Uso del Suelo / Masas de Agua (5,6,4)
plotRGB(LC, r = 5, g = 6, b = 4, stretch = "lin")
# normalizamos los valores del canal 5 (x-mean)/sd
infrared <- scale(LC[[5]])
# dibujamos el infrarojo
plot(infrared)
hist(infrared)
quantiles(infrared)
quantile(infrared)
# extraemos zonas con infrarojo alto, que aproximan a la vegetacion
vegetacion <- calc(infrared, fun = function(x) ifelse(x <= 3, NA, x))
pal_green <- colorRampPalette(c("green","springgreen4", "darkgreen"))
plot(vegetacion , col = pal_green( 200 ))
# dibujamos el infrarojo
plot(infrared)
plot(vegetacion , col = pal_green( 200 ))
# pasamos pixeles a poligonos
poligonos_infrarojo <- rasterToPolygons(vegetacion, digits = 16) %>% st_as_sf()
plot(poligonos_infrarojo, pal = pal_green)
# veamos que pasa al unirlos
merged_poligonos_infrarojo <- poligonos_infrarojo  %>%
st_union() %>% # unimos vecinos
st_cast("POLYGON")  # aislamos los poligonos resultantes
plot(merged_poligonos_infrarojo, pal = pal_green)
# extraemos los valores del raster original sobre cada poligono resultante y lo guardamos en un df
vegetacion_poly <- data.frame(vegetacion = raster::extract(vegetacion,
st_as_sf(merged_poligonos_infrarojo),
fun=mean))
# le asignamos al df las geometrias de los poligonos
st_geometry(vegetacion_poly) <- st_sfc(merged_poligonos_infrarojo)
# visualizamos
plot(vegetacion_poly, pal = pal_green)
# agregar la frontera de Las Condes
LasCondes <- sf::st_read("data/LasCondes.shp")
plot(LasCondes$geometry)
plot(vegetacion_poly, pal = pal_green, add = TRUE)
# visualizamos en mapa interactivo
mview <- mapview(LasCondes, color = "#05A39B", alpha.region =0)+
viewRGB(LC, r = 4, g = 3, b = 2, na.color = "transparent") +
mapview(vegetacion_poly, na.color = "transparent", col.regions = pal_green)
mview
# guardamos el mapa como pagina html
mapshot(x = mview, url = "mapa_veg.html")
